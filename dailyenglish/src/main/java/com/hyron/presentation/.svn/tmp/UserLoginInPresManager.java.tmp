package com.hyron.presentation;

import java.util.List;

import javax.faces.context.FacesContext;
import javax.servlet.http.HttpSession;

import com.hyron.common.Role;
import com.hyron.db.domain.User;
import com.hyron.facade.UserLoginInFacade;
import com.hyron.javabean.UserBean;

public class UserLoginInPresManager {
	public static final String USER_SESSION_NAME = "UserName";
	public static final String USER_SESSION_ROLE = "Role";
	public UserLoginInFacade userLoginInFacade;

	public UserLoginInFacade getUserLoginInFacade() {
		return userLoginInFacade;
	}

<<<<<<< .mine
	public UserLoginInFacade getUserLoginInFacade() {
		return userLoginInFacade;
	}

	public void setUserLoginInFacade(UserLoginInFacade userLoginInFacade) {
		this.userLoginInFacade = userLoginInFacade;
	}
	

=======
	public void setUserLoginInFacade(UserLoginInFacade userLoginInFacade) {
		this.userLoginInFacade = userLoginInFacade;
	}

	public List<UserBean> userLoginIn(String userNameorEmail, String passWord){
		List<UserBean> u = (List<UserBean>)userLoginInFacade.userLoginIn(userNameorEmail, passWord);
		if(null != u){
			Role role = new Role();
			String userRole = role.getName(u.get(0).getRole());
			 if (null != FacesContext.getCurrentInstance()) {
			 HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);
			 session.setAttribute(USER_SESSION_ROLE, Role.getName(u.get(0).getRole()));
			 session.setAttribute(USER_SESSION_NAME, u.get(0).getNickName());
			 }
		}
		return u;
	}

>>>>>>> .r8
}
